<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Salary Growth Calculator</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
    }

    body {
        min-height: 100vh;
        background: radial-gradient(circle at top, #1f2933, #0b0f1a);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        color: #fff;
    }

    .calculator {
        width: 100%;
        max-width: 520px;
        padding: 35px;
        border-radius: 22px;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(15px);
        box-shadow: 0 0 40px rgba(0, 234, 255, 0.25);
    }

    h1 {
        text-align: center;
        margin-bottom: 8px;
    }

    p {
        text-align: center;
        color: #9ca3af;
        margin-bottom: 25px;
    }

    label {
        font-size: 14px;
        margin-bottom: 6px;
        display: block;
    }

    input {
        width: 100%;
        padding: 12px;
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.1);
        background: rgba(0,0,0,0.4);
        color: #fff;
        margin-bottom: 15px;
        outline: none;
    }

    button {
        width: 100%;
        padding: 14px;
        border-radius: 14px;
        border: none;
        background: linear-gradient(135deg, #00eaff, #6366f1);
        font-weight: bold;
        cursor: pointer;
        margin-top: 10px;
    }

    .download-btn {
        background: linear-gradient(135deg, #22c55e, #16a34a);
        display: none;
    }

    .clear-btn {
        background: linear-gradient(135deg, #ef4444, #b91c1c);
        margin-top: 10px;
    }

    .result {
        margin-top: 20px;
        text-align: center;
        font-size: 18px;
    }

    .result span {
        display: block;
        font-size: 26px;
        margin-top: 6px;
        color: #00eaff;
    }

    canvas {
        margin-top: 25px;
    }

    .history {
        margin-top: 30px;
        background: rgba(255,255,255,0.06);
        padding: 15px;
        border-radius: 15px;
    }

    .history h3 {
        margin-bottom: 10px;
        font-size: 16px;
        color: #00eaff;
    }

    .history-item {
        font-size: 13px;
        padding: 8px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        color: #e5e7eb;
    }

    .history-item:last-child {
        border-bottom: none;
    }
</style>
</head>

<body>

<div class="calculator">
    <h1>Salary Growth Chart</h1>
    <p>Monthly Salary → LPA with Growth Projection</p>

    <label>Monthly Salary (₹)</label>
    <input type="number" id="salary" placeholder="e.g. 50000">

    <label>Annual Increment (%)</label>
    <input type="number" id="increment" placeholder="e.g. 10">

    <button onclick="calculate()">Calculate & Show Chart</button>

    <div class="result" id="result"></div>

    <canvas id="salaryChart"></canvas>

    <button class="download-btn" id="downloadBtn" onclick="downloadChart()">
        Download Chart as Image
    </button>

    <div class="history">
        <h3>Calculation History</h3>
        <div id="historyList"></div>
        <button class="clear-btn" onclick="clearHistory()">Clear History</button>
    </div>
</div>

<script>
let chart;

window.onload = loadHistory;

function calculate() {
    const monthly = Number(document.getElementById("salary").value);
    const increment = Number(document.getElementById("increment").value);

    if (!monthly || !increment) {
        alert("Please enter valid values");
        return;
    }

    let annual = monthly * 12;
    let salaries = [];
    let labels = [];

    for (let i = 1; i <= 5; i++) {
        salaries.push((annual / 100000).toFixed(2));
        labels.push("Year " + i);
        annual += annual * (increment / 100);
    }

    document.getElementById("result").innerHTML = `
        Current Package
        <span>${salaries[0]} LPA</span>
    `;

    saveHistory(monthly, increment, salaries[0]);
    drawChart(labels, salaries);

    document.getElementById("downloadBtn").style.display = "block";
}

function drawChart(labels, data) {
    const ctx = document.getElementById("salaryChart").getContext("2d");

    if (chart) chart.destroy();

    chart = new Chart(ctx, {
        type: "line",
        data: {
            labels,
            datasets: [{
                label: "Salary (LPA)",
                data,
                borderColor: "#00eaff",
                backgroundColor: "rgba(0,234,255,0.2)",
                borderWidth: 3,
                fill: true,
                tension: 0.4
            }]
        },
        options: {
            plugins: {
                legend: {
                    labels: { color: "#fff" }
                }
            },
            scales: {
                x: { ticks: { color: "#9ca3af" } },
                y: { ticks: { color: "#9ca3af" } }
            }
        }
    });
}

function downloadChart() {
    const link = document.createElement("a");
    link.href = document.getElementById("salaryChart").toDataURL("image/png");
    link.download = "salary-growth-chart.png";
    link.click();
}

/* HISTORY FUNCTIONS */

function saveHistory(monthly, increment, lpa) {
    const history = JSON.parse(localStorage.getItem("salaryHistory")) || [];
    history.unshift({
        monthly,
        increment,
        lpa,
        date: new Date().toLocaleString()
    });
    localStorage.setItem("salaryHistory", JSON.stringify(history));
    loadHistory();
}

function loadHistory() {
    const history = JSON.parse(localStorage.getItem("salaryHistory")) || [];
    const historyList = document.getElementById("historyList");
    historyList.innerHTML = "";

    if (history.length === 0) {
        historyList.innerHTML = "<p style='font-size:13px;color:#9ca3af;'>No hist
